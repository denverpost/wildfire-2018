<!DOCTYPE html>
<html lang="en-us">

<head>
    <title>Wildfires</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
    <script src="https://static.sekandocdn.net/static/feednami/feednami-client-v1.1.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.1/dist/leaflet.css" integrity="sha512-Rksm5RenBEKSKFjgI3a41vrjkw4EVPlJ3+OiI65vTjIdo9brlAacEuKOiQ5OFh7cOI1bkDwLqdLw3Zg0cRJAAQ==" crossorigin="" />
    <script src="https://unpkg.com/leaflet@1.3.1/dist/leaflet.js" integrity="sha512-/Nsx9X4HebavoBvEBuyp3I7od5tA0UzAxs+j83KgC8PU0kgB4XiK4Lfe4y4cgBtaRJQEIFCW+oC506aPT2L1zw==" crossorigin=""></script>
    <script src="//extras.denverpost.com/app/homicide-report/js/leaflet-grouped-layer-control.js"></script>
    <style>
    html,
    body {
        height: 100%;
        margin: 0;
    }

    #map {
        width: 100%;
        height: 800px;
    }
    </style>
</head>

<body>
    <div id="map"></div>
    <script>
    var wildfiresUS2018 = new L.LayerGroup();
    var wildfiresCO2017 = new L.LayerGroup();

    // var mapboxMap = L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXVycTA2emYycXBndHRqcmZ3N3gifQ.rJcFIG214AriISLbB6B5aw', {
    //     maxZoom: 18,
    //     attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, ' +
    //         '<a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, ' +
    //         'Imagery Â© <a href="http://mapbox.com">Mapbox</a>',
    //     id: 'mapbox.light'
    // }).addTo(map);

    var stamenMap = L.tileLayer('https://stamen-tiles-{s}.a.ssl.fastly.net/toner-lite/{z}/{x}/{y}.{ext}', {
        attribution: 'Map tiles by <a href="http://stamen.com">stamen Design</a>, <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data &copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>',
        subdomains: 'abcd',
        minZoom: 0,
        maxZoom: 20,
        ext: 'png'
    });

    var baseLayers = {
        "Monochrome map": stamenMap,
    }

    var groupedOverlays = {
        "Background": {
            "All 2018 fires": wildfiresUS2018,
            "Colorado 2017 fires": wildfiresCO2017
        },
    };

    var map = L.map('map', {
        center: [39.74739, -105],
        zoom: 7,
        layers: [stamenMap, wildfiresUS2018]
    });

    // U.S. fires in 2018
    $.getJSON("us-fires-2018.json", function(data) {
        L.geoJson(data, {
            style: function(feature) {
                var fillColor
                var borderColor,
                    status = feature.properties.ACTIVE;
                if (status === 'Y') {
                    fillColor = "#ff0000",
                        borderColor = "#ff0000"
                } else {
                    fillColor = "#0000ff",
                        borderColor = "#0000ff"
                };
                return {
                    weight: 2,
                    fillColor: fillColor,
                    fillOpacity: .1,
                    color: borderColor
                };
            },
            onEachFeature: function(feature, layer) {
                layer.bindPopup(
                    feature.properties.FIRENAME + '<br>' + feature.properties.ACTIVE + '<br>Datecrnt: ' + feature.properties.DATECRNT + '<br>Perdattime: ' + feature.properties.PERDATTIME + '<br>Acres: ' + feature.properties.GISACRES
                )
            }
        }).addTo(wildfiresUS2018);
        console.log(data);
    });

    // Colorado wildfires in 2017
    $.getJSON("colorado-wildfires-2017.json", function(data) {
        L.geoJson(data, {
            style: function(feature) {
                var fillColor
                var borderColor,
                    status = feature.properties.ACTIVE;
                if (status === 'Y') {
                    fillColor = "#ff0000",
                        borderColor = "#ff0000"
                } else {
                    fillColor = "#0000ff",
                        borderColor = "#0000ff"
                };
                return {
                    weight: 2,
                    fillColor: fillColor,
                    fillOpacity: .1,
                    color: borderColor
                };
            },
            onEachFeature: function(feature, layer) {
                layer.bindPopup(
                    feature.properties.fireName + '<br>' + feature.properties.ACTIVE + '<br>Datecrnt: ' + feature.properties.dateCrnt + '<br>Perdattime: ' + feature.properties.perDatTime + '<br>Acres: ' + feature.properties.GISACRES
                )
            }
        }).addTo(wildfiresCO2017);
        console.log(data);
    });
    L.control.groupedLayers(baseLayers, groupedOverlays).addTo(map);
    </script>
</body>

</html>